// Package writetofile implements a file writer for Flogo
package writetofile

import (
	"fmt"
	"io/ioutil"
	"testing"

	"github.com/TIBCOSoftware/flogo-contrib/action/flow/test"
	"github.com/TIBCOSoftware/flogo-lib/core/activity"
)

var activityMetadata *activity.Metadata

func getActivityMetadata() *activity.Metadata {

	if activityMetadata == nil {
		jsonMetadataBytes, err := ioutil.ReadFile("activity.json")
		if err != nil {
			panic("No Json Metadata found for activity.json path")
		}

		activityMetadata = activity.NewMetadata(string(jsonMetadataBytes))
	}

	return activityMetadata
}

func TestCreate(t *testing.T) {

	act := NewActivity(getActivityMetadata())

	if act == nil {
		t.Error("Activity Not Created")
		t.Fail()
		return
	}
}

func TestEvalCreateNewFile(t *testing.T) {

	defer func() {
		if r := recover(); r != nil {
			t.Failed()
			t.Errorf("panic during execution: %v", r)
		}
	}()

	act := NewActivity(getActivityMetadata())
	tc := test.NewTestActivityContext(getActivityMetadata())

	// Set required attributes
	tc.SetInput("filename", "./tmp/data.txt")
	tc.SetInput("content", "Hello World!!")
	tc.SetInput("contentType", "text")
	tc.SetInput("append", false)
	tc.SetInput("create", true)

	// Execute the activity
	act.Eval(tc)

	// Check the result
	result := tc.GetOutput("result")
	fmt.Printf("The result is:\n[%s]\n", result)
}

func TestEvalAppendToFile(t *testing.T) {

	defer func() {
		if r := recover(); r != nil {
			t.Failed()
			t.Errorf("panic during execution: %v", r)
		}
	}()

	act := NewActivity(getActivityMetadata())
	tc := test.NewTestActivityContext(getActivityMetadata())

	// Set required attributes
	tc.SetInput("filename", "./tmp/data.txt")
	tc.SetInput("content", "\nA second Hello World!!")
	tc.SetInput("contentType", "text")
	tc.SetInput("append", true)
	tc.SetInput("create", false)

	// Execute the activity
	act.Eval(tc)

	// Check the result
	result := tc.GetOutput("result")
	fmt.Printf("The result is:\n[%s]\n", result)
}

func TestEvalAppendToNonExisting(t *testing.T) {

	defer func() {
		if r := recover(); r != nil {
			t.Failed()
			t.Errorf("panic during execution: %v", r)
		}
	}()

	act := NewActivity(getActivityMetadata())
	tc := test.NewTestActivityContext(getActivityMetadata())

	// Set required attributes
	tc.SetInput("filename", "./tmp/bla.txt")
	tc.SetInput("content", "Hello World!!")
	tc.SetInput("contentType", "text")
	tc.SetInput("append", false)
	tc.SetInput("create", false)

	// Execute the activity
	act.Eval(tc)

	// Check the result
	result := tc.GetOutput("result")
	fmt.Printf("The result is:\n[%s]\n", result)
}

func TestEvalBase64(t *testing.T) {
	defer func() {
		if r := recover(); r != nil {
			t.Failed()
			t.Errorf("panic during execution: %v", r)
		}
	}()

	act :=  NewActivity(getActivityMetadata())
	tc := test.NewTestActivityContext(getActivityMetadata())

	// Set required attributes
	tc.SetInput("filename", "./tmp/test.png")
	tc.SetInput("content", "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")
	tc.SetInput("contentType", "base64encoded")
	tc.SetInput("append", false)
	tc.SetInput("create", true)

	// Execute the activity
	act.Eval(tc)

	// Check the result
	result := tc.GetOutput("result")
	fmt.Printf("The result is:\n[%s]\n", result)
}
